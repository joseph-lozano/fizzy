<%= turbo_frame_tag @stage do %>
  <%= form_with model: @stage, url: workflow_stage_path(@stage.workflow, @stage), id: dom_id(@stage, :form), class: "full-width" do |form| %>
    <%= form.text_field :name, required: true, autofocus: true, class: "input full-width" %>
  <% end %>

  <div class="flex align-center gap-half">
    <%= tag.button type: :submit, class: "btn btn--small btn--positive", form: dom_id(@stage, :form) do %>
      <%= image_tag "check.svg", aria: { hidden: true }, size: 24 %>
      <span class="for-screen-reader">Save</span>
    <% end %>

    <%= link_to workflow_path(@workflow), class: "btn btn--small", data: { turbo_frame: dom_id(@workflow) } do %>
      <%= image_tag "remove-med.svg", aria: { hidden: true }, size: 24 %>
      <span class="for-screen-reader">Cancel</span>
    <% end %>

    <% if @stage.workflow.stages.many? %>
      <%= button_to workflow_stage_path(@stage.workflow, @stage), method: :delete, class: "btn btn--negative btn--small",
          data: { turbo_frame: dom_id(@workflow), turbo_confirm: "Are you sure you want to delete this stage?" } do %>
        <%= image_tag "minus.svg", aria: { hidden: true }, size: 24 %>
        <span class="for-screen-reader">Delete <%= @stage.name %></span>
      <% end %>
    <% end %>
  </div>
<% end %>
